FROM node:18

WORKDIR /app
COPY . .

ARG SESSION_SECRET
ENV SESSION_SECRET=${SESSION_SECRET}

RUN echo "SESSION_SECRET=${SESSION_SECRET}" > .env

RUN npm install
RUN npm run build

EXPOSE 3000
CMD ["npm", "start"]
